{
    "id": "EventBridge",
    "name": "事件桥接器插件 (WebSocket)",
    "version": "1.0.0",
    "description": "基于WebSocket的双向事件桥接器，负责event_bus与设备之间的消息转换和路由",
    "author": "Ship Control Team",
    "entry": "plugin.py",
    "updated_at": "2025-10-06T00:00:00Z",
    "dependencies": [
        "websockets>=12.0"
    ],
    "config_schema": [
        {
            "key": "listen_port",
            "type": "number",
            "default": 13000,
            "min": 10001,
            "max": 65535,
            "description": "WebSocket监听端口",
            "required": true
        },
        {
            "key": "devices",
            "type": "object",
            "default": {
                "usb2xxx_1": {
                    "description": "主控设备"
                }
            },
            "description": "设备配置表 {device_name: {description}}",
            "required": true
        }
    ],
    "interfaces": [
        {
            "name": "get_bridge_status",
            "description": "获取桥接器状态",
            "input_schema": {},
            "output_schema": {
                "running": "boolean",
                "listen_port": "number",
                "connected_devices": "array",
                "client_count": "number",
                "statistics": "object"
            }
        },
        {
            "name": "get_device_connection",
            "description": "获取设备连接状态",
            "input_schema": {
                "device_name": "string"
            },
            "output_schema": {
                "success": "boolean",
                "connected": "boolean",
                "remote_address": "string"
            }
        },
        {
            "name": "broadcast_message",
            "description": "广播消息到所有客户端",
            "input_schema": {
                "message": "object"
            },
            "output_schema": {
                "success": "boolean",
                "message": "string"
            }
        }
    ],
    "events": {
        "publishes": [
            "device.command.result",
            "device.status.**",
            "sensor.**",
            "alert.**",
            "system.heartbeat",
            "bridge.started",
            "bridge.stopped",
            "bridge.error"
        ],
        "subscribes": [
            "device.command.**"
        ]
    }
}