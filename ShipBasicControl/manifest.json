{
    "id": "DeviceControl",
    "name": "设备统一控制插件",
    "version": "1.0.0",
    "description": "提供设备统一控制功能，支持推进器、泵、切割器、传送带、步进电机等设备的控制和状态监控",
    "author": "Ship Control Team",
    "entry": "plugin.py",
    "updated_at": "2025-10-04T00:00:00Z",
    "dependencies": [
        {
            "plugin_id": "EventBridge",
            "min_version": "1.0.0",
            "required": true
        }
    ],
    "config_schema": [
        {
            "key": "target_device",
            "type": "string",
            "default": "usb2xxx_1",
            "description": "目标设备名称（与桥接器配置的device_name一致）",
            "required": true
        },
        {
            "key": "command_timeout",
            "type": "number",
            "default": 8.0,
            "min": 1.0,
            "max": 30.0,
            "description": "设备命令超时时间 (秒)",
            "required": true
        },
        {
            "key": "status_update_interval",
            "type": "number",
            "default": 1.0,
            "min": 0.1,
            "max": 10.0,
            "description": "状态更新间隔 (秒)",
            "required": true
        }
    ],
    "interfaces": [
        {
            "name": "send_device_command",
            "description": "发送设备控制命令",
            "input_schema": {
                "device_id": "string",
                "verb": "string",
                "arg": "number (optional)"
            },
            "output_schema": {
                "success": "boolean",
                "message": "string"
            }
        },
        {
            "name": "get_device_status",
            "description": "获取设备状态",
            "input_schema": {
                "device_id": "string (optional)"
            },
            "output_schema": {
                "status": "object"
            }
        },
        {
            "name": "emergency_stop_device",
            "description": "紧急停止指定设备",
            "input_schema": {
                "device_id": "string"
            },
            "output_schema": {
                "success": "boolean",
                "message": "string"
            }
        }
    ],
    "events": {
        "publishes": [
            "device.command.pump",
            "device.command.propeller",
            "device.command.cutter",
            "device.command.conveyor",
            "device.command.stepper",
            "device.control.command_sent",
            "device.control.status_update"
        ],
        "subscribes": [
            "ship.control.device_command",
            "device.command.result",
            "device.status.**",
            "alert.**"
        ]
    }
}