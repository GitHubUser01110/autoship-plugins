{
    "id": "VideoStream",
    "name": "视频流插件 (UDP + WebSocket)",
    "version": "1.0.0",
    "description": "基于UDP接收视频流和检测框，通过WebSocket分发给订阅者",
    "author": "Ship Control Team",
    "entry": "plugin.py",
    "updated_at": "2025-10-10T00:00:00Z",
    "dependencies": [],
    "config_schema": [
        {
            "key": "udp_video_port",
            "type": "number",
            "default": 14000,
            "min": 10001,
            "max": 65535,
            "description": "UDP视频流接收端口",
            "required": true
        },
        {
            "key": "udp_detection_port",
            "type": "number",
            "default": 14001,
            "min": 10001,
            "max": 65535,
            "description": "UDP检测框接收端口",
            "required": true
        },
        {
            "key": "ws_port",
            "type": "number",
            "default": 14002,
            "min": 10001,
            "max": 65535,
            "description": "WebSocket订阅服务端口",
            "required": true
        }
    ],
    "interfaces": [
        {
            "name": "get_stream_status",
            "description": "获取视频流状态（包括摄像头流统计）",
            "input_schema": {},
            "output_schema": {
                "running": "boolean",
                "udp_video_port": "number",
                "udp_detection_port": "number",
                "ws_port": "number",
                "camera_stream_count": "number",
                "ws_client_count": "number",
                "statistics": "object",
                "video_handler_stats": "object"
            }
        },
        {
            "name": "get_performance_report",
            "description": "获取性能报告",
            "input_schema": {},
            "output_schema": {
                "success": "boolean",
                "performance": "object",
                "recommendations": "array"
            }
        },
        {
            "name": "get_camera_streams",
            "description": "获取所有摄像头流信息",
            "input_schema": {},
            "output_schema": {
                "success": "boolean",
                "stream_count": "number",
                "streams": "object"
            }
        },
        {
            "name": "get_camera_subscribers",
            "description": "获取摄像头订阅者信息",
            "input_schema": {},
            "output_schema": {
                "success": "boolean",
                "subscribers": "object"
            }
        },
        {
            "name": "get_latest_frame",
            "description": "获取最新帧（用于快照）",
            "input_schema": {
                "camera_id": "string"
            },
            "output_schema": {
                "success": "boolean",
                "camera_id": "string",
                "frame_data": "string",
                "frame_size": "number"
            }
        }
    ],
    "events": {
        "publishes": [
            "camera.frame.**",
            "detection.boxes",
            "videostream.started",
            "videostream.stopped"
        ],
        "subscribes": []
    }
}